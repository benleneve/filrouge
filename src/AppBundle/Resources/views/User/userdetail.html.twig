{% extends "AppBundle::Layout.html.twig" %}

{% block title %}
   Profil de {{ " " ~ user.firstName ~ " " ~ user.lastName }}
{% endblock title %}

{% block breadcrumb %}
    {{parent()}} > 
        <a href="{{path('filrouge_user_list')}}">Profils</a> >
        <a href="{{path('filrouge_user_detail', {'id': user.id } )}}">{{user.firstName ~ " " ~ user.lastName}}</a>
{% endblock breadcrumb %}

{% block left %}
    
    <div class="blockGeneral">
        <h2 class="icoUser">Profil</h2>
        <div class="blockContent">
            <div class="headerBlock">
                {% include('AppBundle:User:userheaderlayout.html.twig')%}
                <div class="status">
                    {% if user.availability == true %}
                        Disponible
                        <img alt="Voir plus d'informations" src="{{asset('bundles/app/images/status_green.png')}}" /> 
                    {% elseif user.availability == false %}
                        Indisponible
                        <img alt="Voir plus d'informations" src="{{asset('bundles/app/images/status_red.png')}}" />
                    {% endif %}
                </div>
                <div class="clear"></div>
            </div>
            <div class="bodyBlock">
                <div class="leftProfil">
                    {% if user.dispoBirth == true %}
                        <h4>Age</h4>
                        {{ user.getAge()|date  }}
                    {% endif %}   
                    {% if user.dispoEmail == true %}
                       <h4>Email</h4>
                       {{ user.email }}
                    {% endif %}
                    {% if user.dispoPhone == true %}
                       <h4>Téléphone</h4> 
                       {{ user.phone }}
                    {% endif %}                 
                    {% if user.dispoAddress == true %}
                    <h4>Adresse Postale<h4>
                        <ul>
                            <li>{{ user.address }}</li>
                            <li>{{ user.postCode ~ " " ~ user.city }}</li>
                        </ul>
                    {% endif %}
                    {% include('AppBundle:User:userskilllayout.html.twig') %}  
                    
                    {% if (user.description|length !=0) %}
                        <h4>Présentation</h4>
                        {{ user.description }}
                    {% endif %}
                    
                    <h4>Projets en cours</h4>
                    {% if (user.worksOnProjects|length!=0) %}
                        <table class="projectsMember">
                            <tr>
                                <th>Projet</th>
                                <th>Compétence</th>
                                <th>Date de début</th>
                                <th>Date de fin</th>
                            </tr>
                                {% for worksOnProject in user.worksOnProjects %} 
                                    <tr>
                                        <td> {{ worksOnProject.project.name }} </td>
                                        <td> {{ worksOnProject.skill }} </td>
                                        <td> {{ worksOnProject.project.startDate|date('d/m/Y') }} </td>
                                        <td> {{ worksOnProject.project.endDate|date('d/m/Y') }} </td>
                                    </tr>
                                {% endfor %}
                        </table>
                    {% endif %}

                    <div>
                        <a href="{{path('filrouge_user_detail')}}">
                           <button class="btnAction">> Inviter à rejoindre un projet</button>
                        </a>
                    </div>

                </div>
                <div class="imageProfil">
                    {% if user.image %}
                        <img src="{{asset(user.image.url)}}" alt="{{user.image.alt}} " width="200px" height="200px" />
                    {% endif %}
                </div>
                <div class="clear"></div>           
            </div>
        </div>   
    </div>
    <div class="userUpdate">
        {% if app.user.id == user.id %} 
            <a href=" {{path('filrouge_user_update', {'id': user.id } )}} " class="btnAction">> Modifier mon profil</a>
        {% endif %}
    </div>
{% endblock left %}
